// Project: Pong 
// Author: John Yu
// Created: 2018-04-17

// show all errors
SetErrorMode(2)

// set window properties
SetWindowTitle( "Pong" )
SetWindowSize( 900, 600, 0 )
SetWindowAllowResize( 1 ) // allow the user to resize the window

// set display properties
SetVirtualResolution( 900, 600 ) // doesn't have to match the window
SetOrientationAllowed( 1, 1, 1, 1 ) // allow both portrait and landscape on mobile devices
SetSyncRate( 30, 0 ) // 30fps instead of 60 to save battery
SetScissor( 0,0,0,0 ) // use the maximum available screen space, no black borders
UseNewDefaultFonts( 1 ) // since version 2.0.22 we can use nicer default fonts

// **** To-Do List **** //
/*
1. Add a second page in tutorial outlining what each ability does
*/

// Variables (One Time Use) //
titlecolorred = 255
titlecolorgreen = 0
titlecolorblue = 0

// **** Game Starts Here **** //
// Main Menu Loop Starts Here //
do
	
// **** Image Colors **** //
red = CreateImageColor(255, 0, 0, 255)
white = CreateImageColor(255, 255, 255, 255)
lightgrey = CreateImageColor(225, 225, 225, 255)
grey = CreateImageColor(50, 50, 50, 255)
black = CreateImageColor(0, 0, 0, 255)
babyblue = CreateImageColor(137, 207, 240, 255)
blue = CreateImageColor(0, 0, 255, 255)
skyblue = CreateImageColor(0, 191, 255, 255)
gold = CreateImageColor(255, 215, 0, 255)
green = CreateImageColor(0, 255, 0, 255)

//// ******** Code Starts Here ******** ////

// **** Variables (reused after play again) **** //
elementid1 = 0 // Used to store player 1 choice of element
elementid2 = 0 // Used to store player 2 choice of element
fire = 1
water = 2
earth = 3
air = 4
confirmtextalpha = 0
confirmboxalpha = 0
player1choicetextalpha = 255
player2choicetextalpha = 0
player1spritespeed = 20 // Default but can change depending on element selection
player2spritespeed = 20 // Default but can change depending on element selection
firespeed = 20
waterspeed = 30
earthspeed = 10
airspeed = 40
ballspritespeedx = Random(10, 15) // Initially slow but gets faster as the game goes on
ballspritespeedy = Random(5, 10)
ballspritedirx = 1
ballspritediry = 1
spritecollidestatus = 0 // To prevent paddle collision and boundary collision from executing at the same time
firehp = 400
waterhp = 600
earthhp = 1000
airhp = 600
player1hp = 600
player1totalhp = 600
player2hp = 600
player2totalhp = 600
winnerid = 0 // Keeps track of who winner is 
fireabilitystatus1 = 0 // Tells the program when to run fire sprite movement
fireabilitystatus2 = 0
waterabilitystatus1 = 0
waterabilitystatus2 = 0
earthabilitystatus1 = 0
earthabilitystatus2 = 0
airabilitystatus1 = 0
airabilitystatus2 = 0
player1currentcooldown = 0
player1currentcooldownsave = 0 // Saves current value for reference 
player1currentcooldownwidth = 0 // Used to measure the width of the cooldown bar
player1totalcooldown = 0
player1totalcooldownwidth = 0
player2currentcooldown = 0
player2currentcooldownsave = 0
player2currentcooldownwidth = 0
player2totalcooldown = 0
player2totalcooldownwidth = 0
startcounting1 = 0 // Tells the program when to keep track of cooldown times for player 1
startcounting2 = 0 // Tells the program when to keep track of cooldown times for player 2
stundurationplayer1 = 0
airstunplayer1 = 0 // Keeps track of when player 1 and tornado collide
stundurationplayer2 = 0
airstunplayer2 = 0 // Keeps track of when player 2 and tornado collide
timethatgamestartedat = 0 // Keeps when exact time that game has started
gametime = 0 // The duration that the game has been going on with reference to when it started
timeuntilnextstage = 0

// **** Start Screen Sprites **** //

// Start Screen Background //
startscreenbackground = CreateSprite(LoadImage("risingsun.png"))
SetSpriteSize(startscreenbackground, GetVirtualWidth(), GetVirtualHeight())

// Title //
pongtext = CreateText("Elemental-Pong")
SetTextSize(pongtext, 100)
SetTextColor(pongtext, titlecolorred, titlecolorgreen, titlecolorblue, 255)
pongtextx = GetVirtualWidth()/2 - GetTextTotalWidth(pongtext)/2
pongtexty = 0
SetTextPosition(pongtext, pongtextx, pongtexty)

// Play Button //
playtext = CreateText("PLAY")
SetTextSize(playtext, 50)
SetTextColor(playtext, 0, 0, 0, 255)
playtextx = GetVirtualWidth()/2 - GetTextTotalWidth(playtext)/2
playtexty = GetVirtualHeight()*2/5 - GetTextTotalHeight(playtext)
SetTextPosition(playtext, playtextx, playtexty)

// Tutorial Button //
tutorialtext = CreateText("?")
SetTextSize(tutorialtext, 50)
SetTextColor(tutorialtext, 0, 255, 100, 255)
tutorialtextx = GetVirtualWidth()/2 - GetTextTotalWidth(tutorialtext)/2
tutorialtexty = GetVirtualHeight()*13/20
SetTextPosition(tutorialtext, tutorialtextx, tutorialtexty)

// Tutorial Background //
tutorialback = CreateSprite(LoadImage("scroll.png"))
SetSpriteSize(tutorialback, GetVirtualWidth(), GetVirtualHeight())
SetSpriteColorAlpha(tutorialback, 0)
SetSpriteDepth(tutorialback, 1)

// Back Button //
backtext = CreateText("BACK")
SetTextSize(backtext, 50)
SetTextColorAlpha(backtext, 0)
SetTextDepth(backtext, 0)
backtextx = GetVirtualWidth()/2 - GetTextTotalWidth(backtext)/2
backtexty = GetVirtualHeight()*4/5 - GetTextTotalHeight(backtext)
SetTextPosition(backtext, backtextx, backtexty)

// Tutorial Text //
	// Left Page //
leftpagetitle = CreateText("Controls")
leftpagetext1 = CreateText("Player 1")
leftpagetext2 = CreateText("Use W and S to move paddle")
leftpagetext3 = CreateText("Use D to activate your ability")
leftpagetext4 = CreateText("Player 2")
leftpagetext5 = CreateText("Use PgUp and PgDn to move paddle")
leftpagetext6 = CreateText("Use left arrow key activate your ability")

	// Right Page //
rightpagetitle = CreateText("Gameplay")
rightpagetext1 = CreateText("1. Be the last one standing")
rightpagetext2 = CreateText("2. The Pong is deadly!")
rightpagetext3 = CreateText("3. Use actives for advantage")
rightpagetext4 = CreateText("4. Pong moves faster with time")
rightpagetext5 = CreateText("5. Timer tells when Pong speeds up")

	// Left Page Size //
SetTextSize(leftpagetitle, 60)
SetTextSize(leftpagetext1, 40)
SetTextSize(leftpagetext2, 25)
SetTextSize(leftpagetext3, 25)
SetTextSize(leftpagetext4, 40)
SetTextSize(leftpagetext5, 25)
SetTextSize(leftpagetext6, 25)

	// Right Page Size //
SetTextSize(rightpagetitle, 60)
SetTextSize(rightpagetext1, 25)
SetTextSize(rightpagetext2, 25)
SetTextSize(rightpagetext3, 25)
SetTextSize(rightpagetext4, 25)
SetTextSize(rightpagetext5, 25)

	// Left Page Position //
leftpagetitlex = GetVirtualWidth()/4 - GetTextTotalWidth(leftpagetitle)/2
leftpagetitley = GetVirtualHeight()/10
SetTextPosition(leftpagetitle, leftpagetitlex, leftpagetitley)

leftpagetext1x = GetVirtualWidth()/4 - GetTextTotalWidth(leftpagetext1)/2
leftpagetext1y = GetVirtualHeight()/5
SetTextPosition(leftpagetext1, leftpagetext1x, leftpagetext1y)

leftpagetext2x = GetVirtualWidth()/10
leftpagetext2y = GetVirtualHeight()*3/10
SetTextPosition(leftpagetext2, leftpagetext2x, leftpagetext2y)

leftpagetext3x = GetVirtualWidth()/10
leftpagetext3y = GetVirtualHeight()*7/20
SetTextPosition(leftpagetext3, leftpagetext3x, leftpagetext3y)

leftpagetext4x = GetVirtualWidth()/4 - GetTextTotalWidth(leftpagetext4)/2
leftpagetext4y = GetVirtualHeight()/2
SetTextPosition(leftpagetext4, leftpagetext4x, leftpagetext4y)

leftpagetext5x = GetVirtualWidth()/10
leftpagetext5y = GetVirtualHeight()*3/5
SetTextPosition(leftpagetext5, leftpagetext5x, leftpagetext5y)

leftpagetext6x = GetVirtualWidth()/10
leftpagetext6y = GetVirtualHeight()*13/20
SetTextPosition(leftpagetext6, leftpagetext6x, leftpagetext6y)

	// Right Page Position //
rightpagetitlex = GetVirtualWidth()*3/4 - GetTextTotalWidth(rightpagetitle)/2
rightpagetitley = GetVirtualHeight()/10
SetTextPosition(rightpagetitle, rightpagetitlex, rightpagetitley)

rightpagetext1x = GetVirtualWidth()*11/20
rightpagetext1y = GetVirtualHeight()*5/20
SetTextPosition(rightpagetext1, rightpagetext1x, rightpagetext1y)

rightpagetext2x = GetVirtualWidth()*11/20
rightpagetext2y = GetVirtualHeight()*7/20
SetTextPosition(rightpagetext2, rightpagetext2x, rightpagetext2y)

rightpagetext3x = GetVirtualWidth()*11/20
rightpagetext3y = GetVirtualHeight()*9/20
SetTextPosition(rightpagetext3, rightpagetext3x, rightpagetext3y)

rightpagetext4x = GetVirtualWidth()*11/20
rightpagetext4y = GetVirtualHeight()*11/20
SetTextPosition(rightpagetext4, rightpagetext4x, rightpagetext4y)

rightpagetext5x = GetVirtualWidth()*11/20
rightpagetext5y = GetVirtualHeight()*13/20
SetTextPosition(rightpagetext5, rightpagetext5x, rightpagetext5y)
	
	// Left Page Color //
SetTextColorAlpha(leftpagetitle, 0)
SetTextColorAlpha(leftpagetext1, 0)
SetTextColorAlpha(leftpagetext2, 0)
SetTextColorAlpha(leftpagetext3, 0)
SetTextColorAlpha(leftpagetext4, 0)
SetTextColorAlpha(leftpagetext5, 0)
SetTextColorAlpha(leftpagetext6, 0)
	
	// Right Page Color //
SetTextColorAlpha(rightpagetitle, 0)
SetTextColorAlpha(rightpagetext1, 0)
SetTextColorAlpha(rightpagetext2, 0)
SetTextColorAlpha(rightpagetext3, 0)
SetTextColorAlpha(rightpagetext4, 0)
SetTextColorAlpha(rightpagetext5, 0)
	
	// Left Page Depth //
SetTextDepth(leftpagetitle, 0)
SetTextDepth(leftpagetext1, 0)
SetTextDepth(leftpagetext2, 0)
SetTextDepth(leftpagetext3, 0)
SetTextDepth(leftpagetext4, 0)
SetTextDepth(leftpagetext5, 0)
SetTextDepth(leftpagetext6, 0)
	
	// Right Page Depth //
SetTextDepth(rightpagetitle, 0)
SetTextDepth(rightpagetext1, 0)
SetTextDepth(rightpagetext2, 0)
SetTextDepth(rightpagetext3, 0)
SetTextDepth(rightpagetext4, 0)
SetTextDepth(rightpagetext5, 0)

// **** Start Screen Code **** //
do
	//gosub startscreenbackgroundcolor
	gosub titlecolor
	gosub tutorialbuttoncommands
	gosub backbuttoncommands
	
	// Play Button Commands //
	if GetTextHitTest(playtext, GetPointerX(), GetPointerY())
		if GetSpriteColorAlpha(tutorialback) = 0
			SetTextSize(playtext, 55)
			playtextx = GetVirtualWidth()/2 - GetTextTotalWidth(playtext)/2
			playtexty = GetVirtualHeight()*2/5
			SetTextPosition(playtext, playtextx, playtexty)
			if GetPointerPressed() = 1
				sync() 
				titlecolorred = GetTextColorRed(pongtext)
				titlecolorgreen = GetTextColorGreen(pongtext)
				titlecolorblue = GetTextColorBlue(pongtext)
				DeleteAllText()
				exit
			endif
		endif
	else
		SetTextSize(playtext, 50)
		playtextx = GetVirtualWidth()/2 - GetTextTotalWidth(playtext)/2
		playtexty = GetVirtualHeight()*2/5
		SetTextPosition(playtext, playtextx, playtexty)
	endif
	
	// Tutorial Button Commands //
	
    Sync()
loop

// **** Character Selection **** //

// Sprites //

// Background //
charselectback = CreateSprite(LoadImage("fourelements.png"))
SetSpriteSize(charselectback, GetVirtualWidth(), GetVirtualHeight())

// Choose Your Element //
choosetext = CreateText("CHOOSE YOUR ELEMENT")
SetTextSize(choosetext, 50)
SetTextColor(choosetext, 255, 255, 255, 255)
choosetextx = GetVirtualWidth()/2 - GetTextTotalWidth(choosetext)/2
choosetexty = 0
SetTextPosition(choosetext, choosetextx, choosetexty)

// Element Sprites //
	// Fire Sprite //
fireimage = LoadImage("fire.png")
firesprite = CreateSprite(fireimage)
SetSpriteScale(firesprite, (GetVirtualWidth()/10)/(GetSpriteWidth(firesprite)), (GetVirtualWidth()/10)/(GetSpriteWidth(firesprite)))
firex = GetVirtualWidth()/5 - GetSpriteWidth(firesprite)/2
firey = GetVirtualHeight()/4 - GetSpriteHeight(firesprite)/2
SetSpritePosition(firesprite, firex, firey)
SetSpriteDepth(firesprite, 0)

	// Water Sprite //
waterimage = LoadImage("water.png")
watersprite = CreateSprite(waterimage)
SetSpriteScale(watersprite, (GetVirtualWidth()/10)/(GetSpriteWidth(watersprite)), (GetVirtualWidth()/10)/(GetSpriteWidth(watersprite)))
waterx = GetVirtualWidth()*2/5 - GetSpriteWidth(watersprite)/2
watery = GetVirtualHeight()/4 - GetSpriteHeight(watersprite)/2
SetSpritePosition(watersprite, waterx, watery)
SetSpriteDepth(watersprite, 0)

	// Earth Sprite //
earthimage = LoadImage("earth.png")
earthsprite = CreateSprite(earthimage)
SetSpriteScale(earthsprite, (GetVirtualWidth()/10)/(GetSpriteWidth(earthsprite)), (GetVirtualWidth()/10)/(GetSpriteWidth(earthsprite)))
earthx = GetVirtualWidth()*3/5 - GetSpriteWidth(earthsprite)/2
earthy = GetVirtualHeight()/4 - GetSpriteHeight(earthsprite)/2
SetSpritePosition(earthsprite, earthx, earthy)
SetSpriteDepth(earthsprite, 0)

	// Air Sprite //
airimage = LoadImage("air.png")
airsprite = CreateSprite(airimage)
SetSpriteScale(airsprite, (GetVirtualWidth()/10)/(GetSpriteWidth(airsprite)), (GetVirtualWidth()/10)/(GetSpriteWidth(airsprite)))
airx = GetVirtualWidth()*4/5 - GetSpriteWidth(airsprite)/2
airy = GetVirtualHeight()/4 - GetSpriteHeight(airsprite)/2
SetSpritePosition(airsprite, airx, airy)
SetSpriteDepth(airsprite, 0)

// Other Sprites //
	// Confirm Button //
		// Text
confirmtext = CreateText("CONFIRM")
SetTextDepth(confirmtext, 0)
SetTextSize(confirmtext, 50)
SetTextColor(confirmtext, 255, 255, 255, confirmtextalpha)
confirmtextx = GetVirtualWidth()/2 - GetTextTotalWidth(confirmtext)/2
confirmtexty = GetVirtualHeight() - GetTextTotalHeight(confirmtext)*2
SetTextPosition(confirmtext, confirmtextx, confirmtexty)

		// Confirm Box //
confirmbox = CreateSprite(skyblue)
SetSpriteColor(confirmbox, 32, 64, 67, confirmboxalpha)
confirmboxw = GetTextTotalWidth(confirmtext)
confirmboxh = GetTextTotalHeight(confirmtext)
SetSpriteSize(confirmbox, confirmboxw, confirmboxh)
SetSpritePosition(confirmbox, confirmtextx, confirmtexty)

		// Player 1 Text //
player1choicetext = CreateText("Player 1")
SetTextSize(player1choicetext, 50)
SetTextColor(player1choicetext, 255, 255, 255, player1choicetextalpha)
player1choicetextx = GetVirtualWidth()/2 - GetTextTotalWidth(player1choicetext)/2
player1choicetexty = GetTextTotalHeight(choosetext)
SetTextPosition(player1choicetext, player1choicetextx, player1choicetexty)

		// Player 2 Choice Text //
player2choicetext = CreateText("Player 2")
SetTextSize(player2choicetext, 50)
SetTextColor(player2choicetext, 255, 255, 255, player2choicetextalpha)
player2choicetextx = GetVirtualWidth()/2 - GetTextTotalWidth(player2choicetext)/2
player2choicetexty = GetTextTotalHeight(choosetext)
SetTextPosition(player2choicetext, player2choicetextx, player2choicetexty)

// Element Stat // **Displays the stats of the chosen element**
	// Background //
elementstatback = CreateSprite(white)
SetSpriteSize(elementstatback, GetVirtualWidth(), GetVirtualHeight()*19/40)
elementstatbackx = 0
elementstatbacky = GetVirtualHeight()*7/20
SetSpritePosition(elementstatback, elementstatbackx, elementstatbacky)
SetSpriteColorAlpha(elementstatback, 0)

	// Active Text //
activetext = CreateText("ACTIVE:")
SetTextColor(activetext, 255, 215, 0, 0)
SetTextSize(activetext, 50)
activetextx = 10
activetexty = elementstatbacky + GetSpriteHeight(elementstatback)/8 - GetTextTotalHeight(activetext)/2
SetTextPosition(activetext, activetextx, activetexty)

	// Offense Text //
offensetext = CreateText("OFFENSE:")
SetTextColor(offensetext, 255, 215, 0, 0)
SetTextSize(offensetext, 50)
offensetextx = 10
offensetexty = elementstatbacky + GetSpriteHeight(elementstatback)*3/8 - GetTextTotalHeight(offensetext)/2
SetTextPosition(offensetext, offensetextx, offensetexty)

	// Offense stat background //
offenseback = CreateSprite(lightgrey)
SetSpriteSize(offenseback, GetVirtualWidth()*3/4, GetTextTotalHeight(offensetext))
offensebackx = GetVirtualWidth()*9/40
offensebacky = offensetexty
SetSpritePosition(offenseback, offensebackx, offensebacky)
SetSpriteColorAlpha(offenseback, 0)

	// Offense Meter //
offensemeter = CreateSprite(white)
offensemeterw = GetSpriteWidth(offenseback)
offensemeterh = GetTextTotalHeight(offensetext)
SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
offensemeterx = offensebackx
offensemetery = offensebacky
SetSpritePosition(offensemeter, offensemeterx, offensemetery)
SetSpriteColorAlpha(offensemeter, 0)

	// Defense Text //
defensetext = CreateText("DEFENSE:")
SetTextColor(defensetext, 255, 215, 0, 0)
SetTextSize(defensetext, 50)
defensetextx = 10
defensetexty = elementstatbacky + GetSpriteHeight(elementstatback)*5/8 - GetTextTotalHeight(defensetext)/2
SetTextPosition(defensetext, defensetextx, defensetexty)

	// Defense stat background //
defenseback = CreateSprite(lightgrey)
SetSpriteSize(defenseback, GetVirtualWidth()*3/4, GetTextTotalHeight(defensetext))
defensebackx = GetVirtualWidth()*9/40
defensebacky = defensetexty
SetSpritePosition(defenseback, defensebackx, defensebacky)
SetSpriteColorAlpha(defenseback, 0)

	// Defense Meter //
defensemeter = CreateSprite(white)
defensemeterw = GetSpriteWidth(defenseback)
defensemeterh = GetTextTotalHeight(defensetext)
SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
defensemeterx = defensebackx
defensemetery = defensebacky
SetSpritePosition(defensemeter, defensemeterx, defensemetery)
SetSpriteColorAlpha(defensemeter, 0)

	// Speed Text //
speedtext = CreateText("SPEED:")
SetTextColor(speedtext, 255, 215, 0, 0)
SetTextSize(speedtext, 50)
speedtextx = 10
speedtexty = elementstatbacky + GetSpriteHeight(elementstatback)*7/8 - GetTextTotalHeight(defensetext)/2
SetTextPosition(speedtext, speedtextx, speedtexty)

	// Speed stat background //
speedback = CreateSprite(lightgrey)
SetSpriteSize(speedback, GetVirtualWidth()*3/4, GetTextTotalHeight(speedtext))
speedbackx = GetVirtualWidth()*9/40
speedbacky = speedtexty
SetSpritePosition(speedback, speedbackx, speedbacky)
SetSpriteColorAlpha(speedback, 0)

	// Speed Meter //
speedmeter = CreateSprite(white)
speedmeterw = GetSpriteWidth(speedback)
speedmeterh = GetTextTotalHeight(speedtext)
SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
speedmeterx = speedbackx
speedmetery = speedbacky
SetSpritePosition(speedmeter, speedmeterx, speedmetery)
SetSpriteColorAlpha(speedmeter, 0)

// Element Icon Highlight //
iconhighlight = CreateSprite(gold)
SetSpriteColorAlpha(iconhighlight, 0)
SetSpriteSize(iconhighlight, GetVirtualWidth()/10, GetVirtualWidth()/10)
SetSpritePosition(iconhighlight, 0, 0)

// **** Element Selection Code **** //

	// Player 1 Choice //
do
	// ** Element Icon Commands **//
	gosub elementiconcommands1

	// Confirm Button Commands //
	if GetSpriteColorAlpha(confirmbox) = 255
		if GetSpriteHitTest(confirmbox, GetPointerX(), GetPointerY()) = 1
			SetSpriteColor(confirmbox, 0, 191, 255, confirmboxalpha) // Turn into skyblue
			if GetPointerPressed() = 1
				sync()
				// Sets the confirm text opacity to 0 //
				confirmtextalpha = 0
				SetTextColorAlpha(confirmtext, confirmtextalpha)
				player1choicetextalpha = 0
				// Transition the player text between selections //
				SetTextColorAlpha(player1choicetext, player1choicetextalpha)
				player2choicetextalpha = 255
				SetTextColorAlpha(player2choicetext, player2choicetextalpha)
				// Sets the confirm box opacity to 0 //
				confirmboxalpha = 0
				SetSpriteColorAlpha(confirmbox, confirmboxalpha)
				SetSpriteColorAlpha(iconhighlight, 0)
				// Set Text Opacity //
				SetTextColorAlpha(activetext, 0)
				SetTextColorAlpha(offensetext, 0)
				SetTextColorAlpha(defensetext, 0)
				SetTextColorAlpha(speedtext, 0)
				// Set Sprite Opacity //
				SetSpriteColorAlpha(elementstatback, 0)
				SetSpriteColorAlpha(offenseback, 0)
				SetSpriteColorAlpha(offensemeter, 0)
				SetSpriteColorAlpha(defenseback, 0)
				SetSpriteColorAlpha(defensemeter, 0)
				SetSpriteColorAlpha(speedback, 0)
				SetSpriteColorAlpha(speedmeter, 0)
				exit
			endif
		else
			SetSpriteColor(confirmbox, 32, 64, 67, confirmboxalpha)
		endif
	endif

	sync()
loop

	// **** Player 2 Choice **** //
	// Player 2 Choice //
do
	// Element Icon Commands 2 //
	gosub elementiconcommands2

	// Confirm Button Commands //
	if GetSpriteColorAlpha(confirmbox) = 255
		if GetSpriteHitTest(confirmbox, GetPointerX(), GetPointerY()) = 1
			SetSpriteColor(confirmbox, 0, 191, 255, confirmboxalpha) // Turn into skyblue
			if GetPointerPressed() = 1				
				sync()
				timethatgamestartedat = GetSeconds()
				DeleteAllText()
				DeleteAllSprites()
				exit
			endif
		else
			SetSpriteColor(confirmbox, 32, 64, 67, confirmboxalpha)
		endif
	endif

	sync()
		
loop

// **** In-Game Sprites **** //
	// Background //
ingamebackground = CreateSprite(LoadImage("arena.png"))
SetSpriteSize(ingamebackground, GetVirtualWidth(), GetVirtualHeight())
SetSpriteDepth(ingamebackground, 10)

	// Player 1 Paddle //
player1sprite = CreateSprite(white)
if elementid1 = 1 then SetSpriteColor(player1sprite, 255, 0, 0, 255)
if elementid1 = 2 then SetSpriteColor(player1sprite, 0, 42, 255, 255)
if elementid1 = 3 then SetSpriteColor(player1sprite, 0, 255, 0, 255)
if elementid1 = 4 then SetSpriteColor(player1sprite, 255, 255, 255, 255)
SetSpriteSize(player1sprite, 10, GetVirtualHeight()/4)
player1spritex = 0
player1spritey = GetVirtualHeight()/2 - GetSpriteHeight(player1sprite)
SetSpritePosition(player1sprite, player1spritex, player1spritey)

	// Player 1 Ability Sprite //
		// Fire Ability Sprite //
if elementid1 = 1 
	fireability1 = LoadImage("fireball1.png")
	fireability1sprite = CreateSprite(fireability1)
	fireability1spritex = -GetSpriteWidth(fireability1sprite)*2
	fireability1spritey = player1spritey + GetSpriteHeight(player1sprite)/2 - GetSpriteHeight(fireability1sprite)/2
	SetSpritePosition(fireability1sprite, fireability1spritex, fireability1spritey)
	SetSpriteAnimation(fireability1sprite, 64, 14, 8)
	SetSpriteColorAlpha(fireability1sprite, 0)
	SetSpriteScale(fireability1sprite, 4, 4)
	PlaySprite(fireability1sprite, 10, 1, 1, 8)
endif
		// Earth Ability Sprite //
if elementid1 = 3
	earthability1 = LoadImage("rocks.png")
	earthability1sprite = CreateSprite(earthability1)
	earthability1spritex = -GetSpriteWidth(earthability1sprite) - 10
	earthability1spritey = 200
	SetSpritePosition(earthability1sprite, earthability1spritex, earthability1spritey)
	SetSpriteAnimation(earthability1sprite, 250, 184, 8)
	SetSpriteColorAlpha(earthability1sprite, 0)
	SetSpriteScale(earthability1sprite, 0.5, 0.5)
	PlaySprite(earthability1sprite, 10, 1, 1, 8)
endif
		// Air Ability Sprite //
if elementid1 = 4
	airability1 = LoadImage("tornado.png")
	airability1sprite = CreateSprite(airability1)
	airability1spritex = -GetSpriteWidth(airability1sprite) - 10
	airability1spritey = 0
	SetSpritePosition(airability1sprite, airability1spritex, airability1spritey)
	SetSpriteDepth(airability1sprite, 0)
	SetSpriteAnimation(airability1sprite, 350, 600, 2)
	SetSpriteColorAlpha(airability1sprite, 0)
	PlaySprite(airability1sprite, 7, 1, 1, 2)
endif

	// Player 2 Paddle //
player2sprite = CreateSprite(white)
if elementid2 = 1 then SetSpriteColor(player2sprite, 255, 0, 0, 255)
if elementid2 = 2 then SetSpriteColor(player2sprite, 0, 42, 255, 255)
if elementid2 = 3 then SetSpriteColor(player2sprite, 0, 255, 0, 255)
if elementid2 = 4 then SetSpriteColor(player2sprite, 255, 255, 255, 255)
SetSpriteSize(player2sprite, 10, GetVirtualHeight()/4)
player2spritex = GetVirtualWidth() - GetSpriteWidth(player2sprite)
player2spritey = GetVirtualHeight()/2 - GetSpriteHeight(player2sprite)/2
SetSpritePosition(player2sprite, player2spritex, player2spritey)

	// Player 2 Ability Sprite //
		// Fire Ability Sprite //
if elementid2 = 1 
	fireability2 = LoadImage("fireball2.png")
	fireability2sprite = CreateSprite(fireability2)
	fireability2spritex = GetVirtualWidth() + 10
	fireability2spritey = 0
	SetSpritePosition(fireability2sprite, fireability2spritex, fireability2spritey)
	SetSpriteAnimation(fireability2sprite, 64, 14, 8)
	SetSpriteColorAlpha(fireability2sprite, 0)
	SetSpriteScale(fireability2sprite, 4, 4)
	PlaySprite(fireability2sprite, 10, 1, 1, 8)
endif
		// Earth Ability Sprite //
if elementid2 = 3
	earthability2 = LoadImage("rocks.png")
	earthability2sprite = CreateSprite(earthability2)
	earthability2spritex = GetVirtualWidth() + 10
	earthability2spritey = 0
	SetSpritePosition(earthability2sprite, earthability2spritex, earthability2spritey)
	SetSpriteAnimation(earthability2sprite, 250, 184, 8)
	SetSpriteColorAlpha(earthability2sprite, 0)
	SetSpriteScale(earthability2sprite, 0.5, 0.5)
	PlaySprite(earthability2sprite, 10, 1, 1, 8)
endif
		// Air Ability Sprite //
if elementid2 = 4
	airability2 = LoadImage("tornado.png")
	airability2sprite = CreateSprite(airability2)
	airability2spritex = GetVirtualWidth() + 10
	airability2spritey = 0
	SetSpritePosition(airability2sprite, airability2spritex, airability2spritey)
	SetSpriteDepth(airability2sprite, 0)
	SetSpriteAnimation(airability2sprite, 350, 600, 2)
	SetSpriteColorAlpha(airability2sprite, 0)
	PlaySprite(airability2sprite, 7, 1, 1, 2)
endif

	// Ball //
ballsprite = CreateSprite(white) // Temporary ***************************************************************************************************************
SetSpriteSize(ballsprite, 30, 30)
ballspritex = GetVirtualWidth()/8
ballspritey = GetVirtualHeight()/2 - GetSpriteHeight(ballsprite)/2
SetSpritePosition(ballsprite, ballspritex, ballspritey)

	// Health Bar //
		// Player 1 //
			// Background //
player1hpbarback = CreateSprite(gold)
SetSpriteSize(player1hpbarback, GetVirtualWidth()*2/5, 20)
player1hpbarbackx = GetVirtualWidth()*9/20 - GetSpriteWidth(player1hpbarback)
player1hpbarbacky = GetVirtualHeight()*1/50
SetSpritePosition(player1hpbarback, player1hpbarbackx, player1hpbarbacky)

			// Health Meter //
player1hpbarmeter = CreateSprite(white)
if elementid1 = 1 then SetSpriteColor(player1hpbarmeter, 255, 0, 0, 255)
if elementid1 = 2 then SetSpriteColor(player1hpbarmeter, 64, 224, 208, 255)
if elementid1 = 3 then SetSpriteColor(player1hpbarmeter, 0, 255, 0, 255)
if elementid1 = 4 then SetSpriteColor(player1hpbarmeter, 255, 255, 255, 255)
player1hpbarmeterw = GetSpriteWidth(player1hpbarback) - 10
player1hpbarmeterh = GetSpriteHeight(player1hpbarback) - 10
SetSpriteSize(player1hpbarmeter, player1hpbarmeterw, player1hpbarmeterh)
player1hpbarmeterx = player1hpbarbackx + 5
player1hpbarmetery = player1hpbarbacky + GetSpriteHeight(player1hpbarback)/2 - GetSpriteHeight(player1hpbarmeter)/2
SetSpritePosition(player1hpbarmeter, player1hpbarmeterx, player1hpbarmetery)

		// Player 2 //
			// Background //
player2hpbarback = CreateSprite(gold)
SetSpriteSize(player2hpbarback, GetVirtualWidth()*2/5, 20)
player2hpbarbackx = GetVirtualWidth()*11/20 
player2hpbarbacky = GetVirtualHeight()*1/50
SetSpritePosition(player2hpbarback, player2hpbarbackx, player2hpbarbacky)

		// Health Meter //
player2hpbarmeter = CreateSprite(white)
if elementid2 = 1 then SetSpriteColor(player2hpbarmeter, 255, 0, 0, 255)
if elementid2 = 2 then SetSpriteColor(player2hpbarmeter, 64, 224, 208, 255)
if elementid2 = 3 then SetSpriteColor(player2hpbarmeter, 0, 255, 0, 255)
if elementid2 = 4 then SetSpriteColor(player2hpbarmeter, 255, 255, 255, 255)
player2hpbarmeterw = GetSpriteWidth(player2hpbarback) - 10
player2hpbarmeterh = GetSpriteHeight(player2hpbarback) - 10
SetSpriteSize(player2hpbarmeter, GetSpriteWidth(player2hpbarback) - 10, GetSpriteHeight(player2hpbarback) - 10)
player2hpbarmeterx = player2hpbarbackx + GetSpriteWidth(player2hpbarback) - GetSpriteWidth(player2hpbarmeter) - 5
player2hpbarmetery = player2hpbarbacky + GetSpriteHeight(player2hpbarback)/2 - GetSpriteHeight(player2hpbarmeter)/2
SetSpritePosition(player2hpbarmeter, player2hpbarmeterx, player2hpbarmetery)

	// Cooldown Bar //
		// Player 1 //
			// Background 1 //
player1cooldownback = CreateSprite(blue)
SetSpriteSize(player1cooldownback, GetVirtualWidth()*2/5, 20)
player1cooldownbackx = GetVirtualWidth()*9/20 - GetSpriteWidth(player1cooldownback)
player1cooldownbacky = GetVirtualHeight()*3/50
SetSpritePosition(player1cooldownback, player1cooldownbackx, player1cooldownbacky)

			// Cooldown Meter Player 1 //
player1cooldownmeter = CreateSprite(babyblue)
player1cooldownmeterw = GetSpriteWidth(player1cooldownback) - 10
player1cooldownmeterh = GetSpriteHeight(player1cooldownback) - 10
SetSpriteSize(player1cooldownmeter, player1cooldownmeterw, player1cooldownmeterh)
player1cooldownmeterx = player1cooldownbackx + GetSpriteWidth(player1cooldownback)/2 - GetSpriteWidth(player1cooldownmeter)/2
player1cooldownmetery = player1cooldownbacky + GetSpriteHeight(player1cooldownback)/2 - GetSpriteHeight(player1cooldownmeter)/2
SetSpritePosition(player1cooldownmeter, player1cooldownmeterx, player1cooldownmetery)

		// Player 2 //
			// Background 2 //
player2cooldownback = CreateSprite(blue)
SetSpriteSize(player2cooldownback, GetVirtualWidth()*2/5, 20)
player2cooldownbackx = GetVirtualWidth()*11/20
player2cooldownbacky = GetVirtualHeight()*3/50
SetSpritePosition(player2cooldownback, player2cooldownbackx, player2cooldownbacky)

			// Cooldown Meter Player 2 //
player2cooldownmeter = CreateSprite(babyblue)
player2cooldownmeterw = GetSpriteWidth(player2cooldownback) - 10
player2cooldownmeterh = GetSpriteHeight(player2cooldownback) - 10
SetSpriteSize(player2cooldownmeter, player2cooldownmeterw, player2cooldownmeterh)
player2cooldownmeterx = player2cooldownbackx + GetSpriteWidth(player2cooldownback)/2 - GetSpriteWidth(player2cooldownmeter)/2
player2cooldownmetery = player2cooldownbacky + GetSpriteHeight(player2cooldownback)/2 - GetSpriteHeight(player2cooldownmeter)/2
SetSpritePosition(player2cooldownmeter, player2cooldownmeterx, player2cooldownmetery)

			// Stage Countdown //
timeuntilnextstagetext = CreateText(str(timeuntilnextstage))
SetTextSize(timeuntilnextstagetext, 60)
SetTextColor(timeuntilnextstagetext, 255, 255, 255, 255)
timeuntilnextstagetextx = GetVirtualWidth()/2 - GetTextTotalWidth(timeuntilnextstagetext)/2
timeuntilnextstagetexty = 10
SetTextPosition(timeuntilnextstagetext, timeuntilnextstagetextx, timeuntilnextstagetexty)

// **** In-Game Commands **** //
do
	spritecollidestatus = 0		
	gosub player1movement
	gosub player1abilitycontrols
	gosub player1cooldownbarcommands
	gosub player2movement
	gosub player2abilitycontrols
	gosub player2cooldownbarcommands
	gosub ballmovement
	gosub spritecollision
	if spritecollidestatus = 0	
		gosub boundarycollision
	endif
	// Game Over Commands //
		// Player 1 is Winner //
	if player1hp <= 0 
		winnerid = 2 // "2" represents Player 2
		DeleteAllText()
		deleteallsprites()
		exit
	endif
	
		// Player2 is Winner //
	if player2hp <= 0
		winnerid = 1 // "1" represents Player 1
		DeleteAllText()
		DeleteAllSprites()
		exit
	endif

	sync()
loop
	
// **** End Screen **** //
	// Sprites //
		// End Screen Background //
endscreenback = CreateSprite(LoadImage("planetearth.png"))
SetSpriteSize(endscreenback, GetVirtualWidth(), GetVirtualHeight())

		// Winner Display //
winnertext = CreateText("insert winner here") // This text will be changed at a later stage
if winnerid = 1 then SetTextString(winnertext, "Player 1 Wins") // Player 1 Wins
if winnerid = 2 then SetTextString(winnertext, "Player 2 wins") // player 2 Wins
SetTextColor(winnertext, 255, 255, 255, 255)
SetTextSize(winnertext, 50)
winnertextx = GetVirtualWidth()/2 - GetTextTotalWidth(winnertext)/2
winnertexty = GetVirtualHeight()/2 - GetTextTotalHeight(winnertext)
SetTextPosition(winnertext, winnertextx, winnertexty)

		// Main Menu Button //
mainmenutext = CreateText("MAIN MENU")
SetTextSize(mainmenutext, 50)
SetTextColor(mainmenutext, 255, 215, 0, 255)
mainmenutextx = GetVirtualWidth()/2 - GetTextTotalWidth(mainmenutext)/2
mainmenutexty = GetVirtualHeight()/2 
SetTextPosition(mainmenutext, mainmenutextx, mainmenutexty)

	// End Screen Commands //
do
	if GetTextHitTest(mainmenutext, GetPointerX(), GetPointerY())
		SetTextSize(mainmenutext, 55)
		mainmenutextx = GetVirtualWidth()/2 - GetTextTotalWidth(mainmenutext)/2
		mainmenutexty = GetVirtualHeight()/2 
		SetTextPosition(mainmenutext, mainmenutextx, mainmenutexty)
		if GetPointerPressed() = 1
			sync()
			DeleteAllText()
			DeleteAllSprites()
			DeleteAllImages()
			exit
		endif
	else
		SetTextSize(mainmenutext, 50)
		mainmenutextx = GetVirtualWidth()/2 - GetTextTotalWidth(mainmenutext)/2
		mainmenutexty = GetVirtualHeight()/2 
		SetTextPosition(mainmenutext, mainmenutextx, mainmenutexty)
	endif
	sync()
loop

loop // Main Menu Loop

// Color Shifting for start screen background //
startscreenbackgroundcolor:
	if GetSpriteColorRed(startscreenbackground) >= 255
		if GetSpriteColorBlue(startscreenbackground) >= 1
			SetSpriteColorBlue(startscreenbackground, GetSpriteColorBlue(startscreenbackground) - 1)
		else
			if GetSpriteColorGreen(startscreenbackground) < 255
				SetSpriteColorGreen(startscreenbackground, GetSpriteColorGreen(startscreenbackground) + 1)
			endif
		endif
	endif
	if GetSpriteColorGreen(startscreenbackground) >= 255
		if GetSpriteColorRed(startscreenbackground) >= 1
			SetSpriteColorRed(startscreenbackground, GetSpriteColorRed(startscreenbackground) - 1)
		else
			if GetSpriteColorBlue(startscreenbackground) < 255
				SetSpriteColorBlue(startscreenbackground, GetSpriteColorBlue(startscreenbackground) + 1)
			endif
		endif
	endif
	if GetSpriteColorBlue(startscreenbackground) >= 255
		if GetSpriteColorGreen(startscreenbackground) >= 1
			SetSpriteColorGreen(startscreenbackground, GetSpriteColorGreen(startscreenbackground) - 1)
		else
			if GetSpriteColorRed(startscreenbackground) < 255
				SetSpriteColorRed(startscreenbackground, GetSpriteColorRed(startscreenbackground) + 1)
			endif
		endif
	endif
return

// color shifting for title //
titlecolor:
	if GetTextColorRed(startscreenbackground) >= 255
		if GetTextColorBlue(startscreenbackground) >= 1
			SetTextColorBlue(startscreenbackground, GetTextColorBlue(startscreenbackground) - 1)
		else
			if GetTextColorGreen(startscreenbackground) < 255
				SetTextColorGreen(startscreenbackground, GetTextColorGreen(startscreenbackground) + 1)
			endif
		endif
	endif
	if GetTextColorGreen(startscreenbackground) >= 255
		if GetTextColorRed(startscreenbackground) >= 1
			SetTextColorRed(startscreenbackground, GetTextColorRed(startscreenbackground) - 1)
		else
			if GetTextColorBlue(startscreenbackground) < 255
				SetTextColorBlue(startscreenbackground, GetTextColorBlue(startscreenbackground) + 1)
			endif
		endif
	endif
	if GetTextColorBlue(startscreenbackground) >= 255
		if GetTextColorGreen(startscreenbackground) >= 1
			SetTextColorGreen(startscreenbackground, GetTextColorGreen(startscreenbackground) - 1)
		else
			if GetTextColorRed(startscreenbackground) < 255
				SetTextColorRed(startscreenbackground, GetTextColorRed(startscreenbackground) + 1)
			endif
		endif
	endif
return

tutorialbuttoncommands:
	if GetTextHitTest(tutorialtext, GetPointerX(), GetPointerY())
		SetTextSize(tutorialtext, 60)
		tutorialtextx = GetVirtualWidth()/2 - GetTextTotalWidth(tutorialtext)/2
		tutorialtexty = GetVirtualHeight()*13/20
		SetTextPosition(tutorialtext, tutorialtextx, tutorialtexty)
		if GetPointerPressed() = 1
			sync()
			SetSpriteColorAlpha(tutorialback, 255)
			SetTextColorAlpha(backtext, 255)
						// Left Page Color //
			SetTextColorAlpha(leftpagetitle, 255)
			SetTextColorAlpha(leftpagetext1, 255)
			SetTextColorAlpha(leftpagetext2, 255)
			SetTextColorAlpha(leftpagetext3, 255)
			SetTextColorAlpha(leftpagetext4, 255)
			SetTextColorAlpha(leftpagetext5, 255)
			SetTextColorAlpha(leftpagetext6, 255)
				
				// Right Page Color //
			SetTextColorAlpha(rightpagetitle, 255)
			SetTextColorAlpha(rightpagetext1, 255)
			SetTextColorAlpha(rightpagetext2, 255)
			SetTextColorAlpha(rightpagetext3, 255)
			SetTextColorAlpha(rightpagetext4, 255)
			SetTextColorAlpha(rightpagetext5, 255)
		endif
	else
		SetTextSize(tutorialtext, 50)
		tutorialtextx = GetVirtualWidth()/2 - GetTextTotalWidth(tutorialtext)/2
		tutorialtexty = GetVirtualHeight()*13/20
		SetTextPosition(tutorialtext, tutorialtextx, tutorialtexty)
	endif
return

backbuttoncommands:
	if GetTextHitTest(backtext, GetPointerX(), GetPointerY())
		SetTextSize(backtext, 55)
		backtextx = GetVirtualWidth()/2 - GetTextTotalWidth(backtext)/2
		backtexty = GetVirtualHeight()*4/5 - GetTextTotalHeight(backtext)
		SetTextPosition(backtext, backtextx, backtexty)
		if GetPointerPressed() = 1
			sync()
			SetSpriteColorAlpha(tutorialback, 0)
			SetTextColorAlpha(backtext, 0)
						// Left Page Color //
			SetTextColorAlpha(leftpagetitle, 0)
			SetTextColorAlpha(leftpagetext1, 0)
			SetTextColorAlpha(leftpagetext2, 0)
			SetTextColorAlpha(leftpagetext3, 0)
			SetTextColorAlpha(leftpagetext4, 0)
			SetTextColorAlpha(leftpagetext5, 0)
			SetTextColorAlpha(leftpagetext6, 0)
				
				// Right Page Color //
			SetTextColorAlpha(rightpagetitle, 0)
			SetTextColorAlpha(rightpagetext1, 0)
			SetTextColorAlpha(rightpagetext2, 0)
			SetTextColorAlpha(rightpagetext3, 0)
			SetTextColorAlpha(rightpagetext4, 0)
			SetTextColorAlpha(rightpagetext5, 0)
		endif
	else
		SetTextSize(backtext, 50)
		backtextx = GetVirtualWidth()/2 - GetTextTotalWidth(backtext)/2
		backtexty = GetVirtualHeight()*4/5 - GetTextTotalHeight(backtext)
		SetTextPosition(backtext, backtextx, backtexty)
	endif
return

elementiconcommands1:
// Fire 1 //
	if GetSpriteHitTest(firesprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			elementid1 = fire
			// Changes the hitpoints //
			player1totalhp = firehp
			player1hp = player1totalhp
			// Make the confirm text appear //
			confirmtextalpha = 255
			SetTextColorAlpha(confirmtext, confirmtextalpha)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, firex, firey)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*9/10 // Fire Offense Rating is 9/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*2/10 // Fire Defense Rating is 2/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*5/10 // Fire Speed Rating is 5/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 255, 0, 0, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Shoot a Fireball at your enemy")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 51, 255, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 255, 102, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 255, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player1spritespeed = firespeed
			// Set cooldowns //
			player1totalcooldown = 10 
			player1currentcooldown = player1totalcooldown
		endif
	endif
	// Water 1 //
	if GetSpriteHitTest(watersprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid1 = water
			player1totalhp = waterhp
			player1hp = player1totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, waterx, watery)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*1/10 // Water Offense Rating is 1/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*8/10 // Water Defense Rating is 8/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*7/10 // Water Speed Rating is 7/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 0, 42, 255, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Restore some of your lost health")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 255, 51, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 102, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 153, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player1spritespeed = waterspeed
			// Set cooldowns //
			player1totalcooldown = 15 
			player1currentcooldown = player1totalcooldown
		endif
	endif
	// Earth 1 //
	if GetSpriteHitTest(earthsprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid1 = earth
			player1totalhp = earthhp
			player1hp = player1totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, earthx, earthy)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*7/10 // Earth Offense Rating is 7/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*7/10 // Earth Defense Rating is 7/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*3/10 // Earth Speed Rating is 3/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 0, 150, 0, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Throw a boulder at your enemy")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 153, 255, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 153, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 255, 153, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player1spritespeed = earthspeed
			// Set cooldowns //
			player1totalcooldown = 10 
			player1currentcooldown = player1totalcooldown
		endif
	endif
	// Air 1 //
	if GetSpriteHitTest(airsprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid1 = air
			player1totalhp = airhp
			player1hp = player1totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, airx, airy)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*4/10 // Air Offense Rating is 4/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*7/10 // Air Defense Rating is 7/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*9/10 // Air Speed Rating is 9/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color//
			SetSpriteColor(elementstatback, 240, 240, 240, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Summon a Tornado")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 255, 204, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 153, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 51, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player1spritespeed = airspeed
			// Set cooldowns //
			player1totalcooldown = 8 
			player1currentcooldown = player1totalcooldown
		endif
	endif
return

elementiconcommands2:
		// Fire 2 //
	if GetSpriteHitTest(firesprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid2 = fire
			player2totalhp = firehp
			player2hp = player2totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, firex, firey)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*9/10 // Fire Offense Rating is 9/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*2/10 // Fire Defense Rating is 2/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*5/10 // Fire Speed Rating is 5/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 255, 0, 0, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Shoot a Fireball at your enemy")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 51, 255, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 255, 102, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 255, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player2spritespeed = firespeed
			// Set cooldowns //
			player2totalcooldown = 10 
			player2currentcooldown = player2totalcooldown
		endif
	endif
		// Water 2 //
	if GetSpriteHitTest(watersprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid2 = water
			player2totalhp = waterhp
			player2hp = player2totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, waterx, watery)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*1/10 // Water Offense Rating is 1/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*8/10 // Water Defense Rating is 8/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*7/10 // Water Speed Rating is 7/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 0, 42, 255, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Restore some of your lost health")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 255, 51, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 102, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 153, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player2spritespeed = waterspeed
			// Set cooldowns //
			player2totalcooldown = 15 
			player2currentcooldown = player2totalcooldown
		endif
	endif
		// Earth 2 //
	if GetSpriteHitTest(earthsprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid2 = earth
			player2totalhp = earthhp
			player2hp = player2totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, earthx, earthy)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*7/10 // Earth Offense Rating is 7/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*7/10 // Earth Defense Rating is 7/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*3/10 // Earth Speed Rating is 3/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 0, 150, 0, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Throw a boulder at your enemy")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 153, 255, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 153, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 255, 153, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player2spritespeed = earthspeed
			// Set cooldowns //
			player2totalcooldown = 10 
			player2currentcooldown = player2totalcooldown
		endif
	endif
		// Air 2 //
	if GetSpriteHitTest(airsprite, GetPointerX(), GetPointerY())
		if GetPointerPressed() = 1
			// Changes the hitpoints //
			elementid2 = air
			player2totalhp = airhp
			player2hp = player2totalhp
			// Make the confirm text appear //
			SetTextColorAlpha(confirmtext, 255)
			// Make the confirm box appear //
			confirmboxalpha = 255
			SetSpriteColorAlpha(confirmbox, confirmboxalpha)
			// Highlight the element icon chosen //
			SetSpriteColorAlpha(iconhighlight, 255)
			SetSpritePosition(iconhighlight, airx, airy)
			// Set the offense meter width //
			offensemeterw = GetSpriteWidth(offenseback)*4/10 // Air Offense Rating is 4/10
			SetSpriteSize(offensemeter, offensemeterw, offensemeterh)
			// Set the defense meter width //
			defensemeterw = GetSpriteWidth(defenseback)*7/10 // Air Defense Rating is 7/10
			SetSpriteSize(defensemeter, defensemeterw, defensemeterh)
			// Set the speed meter width //
			speedmeterw = GetSpriteWidth(speedback)*9/10 // Air Speed Rating is 9/10
			SetSpriteSize(speedmeter, speedmeterw, speedmeterh)
			// Set the element stat background color //
			SetSpriteColor(elementstatback, 240, 240, 240, 255)
			// Set the Active Text String //
			SetTextString(activetext, "Active: Summon a Tornado")
			// Set the element meter color //
				// Offense Meter //
			SetSpriteColor(offensemeter, 255, 204, 0, 255)
				// Defense Meter //
			SetSpriteColor(defensemeter, 153, 255, 0, 255)
				// Speed Meter //
			SetSpriteColor(speedmeter, 51, 255, 0, 255)
			// Set Text Opacity //
			SetTextColorAlpha(activetext, 255)
			SetTextColorAlpha(offensetext, 255)
			SetTextColorAlpha(defensetext, 255)
			SetTextColorAlpha(speedtext, 255)
			// Changes the speed //
			player2spritespeed = airspeed
			// Set cooldowns //
			player2totalcooldown = 8 
			player2currentcooldown = player2totalcooldown
		endif
	endif
return

player1movement:
	if GetRawKeyState(87) = 1 // "w" key
		if player1spritey >= 0
			if Timer() <= stundurationplayer1 + 1
				if elementid2 = 1
					player1spritey = player1spritey - 8
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
				if elementid2 = 3
					player1spritey = player1spritey 
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
			else
				if airstunplayer1 = 1
					player1spritey = player1spritey 
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				else
					player1spritey = player1spritey - player1spritespeed
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
			endif
		endif
	endif
	if GetRawKeyState(83) = 1 // "s" key
		if player1spritey <= GetVirtualHeight() - GetSpriteHeight(player1sprite)
			if Timer() <= stundurationplayer1 + 1
				if elementid2 = 1
					player1spritey = player1spritey + 8
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
				if elementid2 = 3
					player1spritey = player1spritey 
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
			else
				if airstunplayer1 = 1
					player1spritey = player1spritey 
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				else 
					player1spritey = player1spritey + player1spritespeed
					SetSpritePosition(player1sprite, player1spritex, player1spritey)
				endif
			endif
		endif
	endif
return

player1abilitycontrols:
// Fire Controls //
	if elementid1 = 1 // Fire
		if player1currentcooldown >= player1totalcooldown
			if GetRawKeyPressed(68) = 1 // "d" key
				fireabilitystatus1 = 1
				SetSpriteColorAlpha(fireability1sprite, 255)
				fireability1spritey = player1spritey + GetSpriteHeight(player1sprite)/2 - GetSpriteHeight(fireability1sprite)/2
				player1totalcooldown = GetSeconds() + 10
				player1totalcooldownwidth = 10
				player1currentcooldownsave = GetSeconds() 
				startcounting1 = 1
			endif
		endif
		if fireabilitystatus1 = 0 then fireability1spritex = -GetSpriteWidth(fireability1sprite) - 10
		if fireabilitystatus1 = 1
			fireability1spritex = fireability1spritex + 70
			SetSpritePosition(fireability1sprite, fireability1spritex, fireability1spritey)
		endif
		if startcounting1 = 1
			player1currentcooldown = GetSeconds()	
		endif
	endif
// Water Controls //
	if elementid1 = 2 
		if	player1currentcooldown >= player1totalcooldown
			if GetRawKeyPressed(68) = 1
				player1hp = player1hp + 100
				if player1hp >= player1totalhp
					player1hp = player1totalhp
				endif
				player1hpbarmeterw = (GetSpriteWidth(player1hpbarback) - 10) * player1hp / player1totalhp
				SetSpriteSize(player1hpbarmeter, player1hpbarmeterw, player1hpbarmeterh)
				player1totalcooldown = GetSeconds() + 20
				player1totalcooldownwidth = 20
				player1currentcooldownsave = GetSeconds()
				startcounting1 = 1
			endif
		endif
		if startcounting1 = 1
			player1currentcooldown = GetSeconds()
		endif		
	endif
// Earth Controls //
	if elementid1 = 3
		if player1currentcooldown >= player1totalcooldown
			if GetRawKeyPressed(68) = 1
				earthabilitystatus1 = 1
				SetSpriteColorAlpha(earthability1sprite, 255)
				earthability1spritey = player1spritey + GetSpriteHeight(player1sprite)/2 - GetSpriteHeight(earthability1sprite)/2
				player1totalcooldown = GetSeconds() + 10
				player1totalcooldownwidth = 10
				player1currentcooldownsave = GetSeconds()
				startcounting1 = 1		
			endif
		endif
		if earthabilitystatus1 = 0 
			earthability1spritex = -GetSpriteWidth(earthability1sprite) - 10
			SetSpritePosition(earthability1sprite, earthability1spritex, earthability1spritey)
		endif
		if earthabilitystatus1 = 1
			earthability1spritex = earthability1spritex + 50

			SetSpritePosition(earthability1sprite, earthability1spritex, earthability1spritey)
		endif
		if startcounting1 = 1
			player1currentcooldown = GetSeconds()
		endif
	endif
// Air Controls //
	if elementid1 = 4
		if player1currentcooldown >= player1totalcooldown
			if GetRawKeyPressed(68) = 1
				airabilitystatus1 = 1
				SetSpriteColorAlpha(airability1sprite, 255)
				player1totalcooldown = GetSeconds() + 8
				player1totalcooldownwidth = 8
				player1currentcooldownsave = GetSeconds()
				startcounting1 = 1
			endif
		endif
		if airabilitystatus1 = 0 
			airability1spritex = -GetSpriteWidth(airability1sprite) - 10
			SetSpritePosition(airability1sprite, airability1spritex, airability1spritey)
		endif
		if airabilitystatus1 = 1
			airability1spritex = airability1spritex + 30
			airability1spritey = 0
			SetSpritePosition(airability1sprite, airability1spritex, airability1spritey)
		endif
		if startcounting1 = 1
			player1currentcooldown = GetSeconds()
		endif
	endif
return

player2movement:
	if GetRawKeyState(38) = 1 // Up key
		if player2spritey >= 0
			if Timer() <= stundurationplayer2 + 1
				if elementid1 = 1
					player2spritey = player2spritey - 8
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
				if elementid1 = 3
					player2spritey = player2spritey - 0
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
			else
				if airstunplayer2 = 1
					player2spritey = player2spritey 
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				else
					player2spritey = player2spritey - player2spritespeed
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
			endif	
		endif
	endif
	if GetRawKeyState(40) = 1 // Down Key
		if player2spritey <= GetVirtualHeight() - GetSpriteHeight(player2sprite)
			if Timer() <= stundurationplayer2 + 1
				// If hit by fireability1sprite //
				if elementid1 = 1
					player2spritey = player2spritey + 8
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
				// If hit by earthability1sprite //
				if elementid1 = 3
					player2spritey = player2spritey + 0
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
			else
				if airstunplayer2 = 1
					player2spritey = player2spritey - 0
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				else
					player2spritey = player2spritey + player2spritespeed
					SetSpritePosition(player2sprite, player2spritex, player2spritey)
				endif
			endif
		endif
	endif
return

player2abilitycontrols:
// Fire Controls //
	if elementid2 = 1 // Fire
		if player2currentcooldown >= player2totalcooldown
			if GetRawKeyPressed(37) = 1 // "left arrow" key
				fireabilitystatus2 = 1
				SetSpriteColorAlpha(fireability2sprite, 255)
				fireability2spritey = player2spritey + GetSpriteHeight(player2sprite)/2 - GetSpriteHeight(fireability2sprite)/2
				player2totalcooldown = GetSeconds() + 10
				player2totalcooldownwidth = 10
				player2currentcooldownsave = GetSeconds()
				startcounting2 = 1			
			endif
		endif
		if fireabilitystatus2 = 0 
			fireability2spritex = GetVirtualWidth() + 10
			SetSpritePosition(fireability2sprite, fireability2spritex, fireability2spritey)
		endif
		if fireabilitystatus2 = 1
			fireability2spritex = fireability2spritex - 70
			SetSpritePosition(fireability2sprite, fireability2spritex, fireability2spritey)
		endif
		if startcounting2 = 1
			player2currentcooldown = GetSeconds()
		endif
	endif
// Water Controls //
	if elementid2 = 2 
		if player2currentcooldown >= player2totalcooldown
			if GetRawKeyPressed(37) = 1
				player2hp = player2hp + 100
				if player2hp >= player2totalhp
					player2hp = player2totalhp
				endif
				player2hpbarmeterw = (GetSpriteWidth(player2hpbarback) - 10) * player2hp / player2totalhp
				SetSpriteSize(player2hpbarmeter, player2hpbarmeterw, player2hpbarmeterh) 
				player2hpbarmeterx = player2hpbarbackx + GetSpriteWidth(player2hpbarback) - GetSpriteWidth(player2hpbarmeter) - 5
				SetSpritePosition(player2hpbarmeter, player2hpbarmeterx, player2hpbarmetery)
				player2totalcooldown = GetSeconds() + 20
				player2totalcooldownwidth = 20
				player2currentcooldownsave = GetSeconds()		
				startcounting2 = 1
			endif
		endif
		if startcounting2 = 1
			player2currentcooldown = GetSeconds()
		endif		
	endif
// Earth Controls //
	if elementid2 = 3
		if player2currentcooldown >= player2totalcooldown
			if GetRawKeyPressed(37) = 1
				earthabilitystatus2 = 1
				SetSpriteColorAlpha(earthability2sprite, 255)
				earthability2spritey = player2spritey + GetSpriteHeight(player2sprite)/2 - GetSpriteHeight(earthability2sprite)/2
				player2totalcooldown = GetSeconds() + 10
				player2totalcooldownwidth = 10
				player2currentcooldownsave = GetSeconds()
				startcounting2 = 1				
			endif
		endif
		if earthabilitystatus2 = 0 
			earthability2spritex = GetVirtualWidth() + 10
			SetSpritePosition(earthability2sprite, earthability2spritex, earthability2spritey)
		endif
		if earthabilitystatus2 = 1
			earthability2spritex = earthability2spritex - 50
			SetSpritePosition(earthability2sprite, earthability2spritex, earthability2spritey)
		endif
		if startcounting2 = 1
			player2currentcooldown = GetSeconds()
		endif
	endif
// Air Controls //
	if elementid2 = 4
		if player2currentcooldown >= player2totalcooldown
			if GetRawKeyPressed(37) = 1
				airabilitystatus2 = 1
				SetSpriteColorAlpha(airability2sprite, 255)
				player2totalcooldown = GetSeconds() + 8
				player2totalcooldownwidth = 8
				player2currentcooldownsave = GetSeconds()
				startcounting2 = 1		
			endif
		endif
		if airabilitystatus2 = 0 
			airability2spritex = GetVirtualWidth() + 10
			SetSpritePosition(airability2sprite, airability2spritex, airability2spritey)
		endif
		if airabilitystatus2 = 1
			airability2spritex = airability2spritex - 30
			airability2spritey = 0
			SetSpritePosition(airability2sprite, airability2spritex, airability2spritey)
		endif
		if startcounting2 = 1
			player2currentcooldown = GetSeconds()
		endif
	endif
return

ballmovement:
// Horizontal Movement //
	ballspritex = ballspritex + ballspritedirx*ballspritespeedx	
// Vertical Movement //
	ballspritey = ballspritey + ballspritediry*ballspritespeedy	
	SetSpritePosition(ballsprite, ballspritex, ballspritey)
// ballspeed //
	gametime = GetSeconds()
	runthroughonce1 = 0
	runthroughonce2 = 0
	runthroughonce3 = 0
	runthroughonce4 = 0
	// Stage 1 //
	if gametime >= timethatgamestartedat + 5
		if runthroughonce1 = 0 
			ballspritespeedx = Random(15, 20)
			ballspritespeedy = Random(15, 20)
			runthroughonce1 = 1
		endif		
	endif
	// Update Timer 1 //
	if gametime < timethatgamestartedat + 5
		timeuntilnextstage = timethatgamestartedat - gametime + 5
		SetTextString(timeuntilnextstagetext, str(timeuntilnextstage))
		timeuntilnextstagetextx = GetVirtualWidth()/2 - GetTextTotalWidth(timeuntilnextstagetext)/2
		timeuntilnextstagetexty = 10
		SetTextPosition(timeuntilnextstagetext, timeuntilnextstagetextx, timeuntilnextstagetexty)
	endif
	// Stage 2 //
	if gametime >= timethatgamestartedat + 10
		if runthroughonce2 = 0 
			ballspritespeedx = Random(20, 25)
			ballspritespeedy = Random(20, 25)
			runthroughonce2 = 1
		endif
	endif
	// Update Timer 2 //
	if gametime < timethatgamestartedat + 10 and gametime >= timethatgamestartedat + 5
		timeuntilnextstage = timethatgamestartedat - gametime + 10
		SetTextString(timeuntilnextstagetext, str(timeuntilnextstage))
		timeuntilnextstagetextx = GetVirtualWidth()/2 - GetTextTotalWidth(timeuntilnextstagetext)/2
		timeuntilnextstagetexty = 10
		SetTextPosition(timeuntilnextstagetext, timeuntilnextstagetextx, timeuntilnextstagetexty)
	endif
	// Stage 3 //
	if gametime >= timethatgamestartedat + 20
		if runthroughonce3 = 0 
			ballspritespeedx = Random(30, 40)
			ballspritespeedy = Random(30, 40)
			runthroughonce3 = 1
		endif			
	endif
	// Update Timer 3 //
	if gametime < timethatgamestartedat + 20 and gametime >= timethatgamestartedat + 10
		timeuntilnextstage = timethatgamestartedat - gametime + 20
		SetTextString(timeuntilnextstagetext, str(timeuntilnextstage))
		timeuntilnextstagetextx = GetVirtualWidth()/2 - GetTextTotalWidth(timeuntilnextstagetext)/2
		timeuntilnextstagetexty = 10
		SetTextPosition(timeuntilnextstagetext, timeuntilnextstagetextx, timeuntilnextstagetexty)
	endif
	// Stage 4 //
	if gametime >= timethatgamestartedat + 40
		if runthroughonce4 = 0 
			ballspritespeedx = Random(50, 60)
			ballspritespeedy = Random(50, 60)
			runthroughonce4 = 1			
		endif
		DeleteText(timeuntilnextstagetext)			
	endif
	// Update Timer 4 //
	if gametime < timethatgamestartedat + 40 and gametime >= timethatgamestartedat + 20
		timeuntilnextstage = timethatgamestartedat - gametime + 40
		SetTextString(timeuntilnextstagetext, str(timeuntilnextstage))
		timeuntilnextstagetextx = GetVirtualWidth()/2 - GetTextTotalWidth(timeuntilnextstagetext)/2
		timeuntilnextstagetexty = 10
		SetTextPosition(timeuntilnextstagetext, timeuntilnextstagetextx, timeuntilnextstagetexty)
	endif
return

boundarycollision:
// Right Wall //
	if ballspritex >= GetVirtualWidth() - GetSpriteWidth(ballsprite)
	// Health Bar //
		player2hp = player2hp - 200
		player2hpbarmeterw = (GetSpriteWidth(player2hpbarback) - 10) * player2hp / player2totalhp
		SetSpriteSize(player2hpbarmeter, player2hpbarmeterw, player2hpbarmeterh) 
		player2hpbarmeterx = player2hpbarbackx + GetSpriteWidth(player2hpbarback) - GetSpriteWidth(player2hpbarmeter) - 5
		player2hpbarmetery = player2hpbarbacky + GetSpriteHeight(player2hpbarback)/2 - GetSpriteHeight(player2hpbarmeter)/2
		SetSpritePosition(player2hpbarmeter, player2hpbarmeterx, player2hpbarmetery)
	// Direction //
		ballspritedirx = -1
	endif	
	// Fire ability 1 //
	if elementid1 = 1
		if fireability1spritex >= GetVirtualWidth()
			fireabilitystatus1 = 0
			SetSpriteColorAlpha(fireability1sprite, 0)
			// Set the Health of Player 2 //
			player2hp = player2hp - 10
			player2hpbarmeterw = (GetSpriteWidth(player2hpbarback) - 10) * player2hp / player2totalhp
			SetSpriteSize(player2hpbarmeter, player2hpbarmeterw, player2hpbarmeterh) 
			player2hpbarmeterx = player2hpbarbackx + GetSpriteWidth(player2hpbarback) - GetSpriteWidth(player2hpbarmeter) - 5
			player2hpbarmetery = player2hpbarbacky + GetSpriteHeight(player2hpbarback)/2 - GetSpriteHeight(player2hpbarmeter)/2
			SetSpritePosition(player2hpbarmeter, player2hpbarmeterx, player2hpbarmetery)
		endif
	endif
	// Earth Ability 1 //
	if elementid1 = 3
		if earthability1spritex >= GetVirtualWidth()
			earthabilitystatus1 = 0
			SetSpriteColorAlpha(earthability1sprite, 0)
		endif
	endif
	// Air Ability 1 //
	if elementid1 = 4
		if airability1spritex >= GetVirtualWidth()
			airabilitystatus1 = 0
			SetSpriteColorAlpha(airability1sprite, 0)
		endif
	endif
	
// Left Wall //
	if ballspritex <= 0
	// Direction //
		ballspritedirx = 1
	// Health Bar //
		player1hp = player1hp - 200
		player1hpbarmeterw = (GetSpriteWidth(player1hpbarback) - 10) * player1hp / player1totalhp
		SetSpriteSize(player1hpbarmeter, player1hpbarmeterw, player1hpbarmeterh)
	endif
	// Fire ability 2 //
	if elementid2 = 1
		if fireability2spritex <= -GetSpriteWidth(fireability2sprite)
			fireabilitystatus2 = 0
			SetSpriteColorAlpha(fireability2sprite, 0)
			// Set the Health of Player 2 //
			player1hp = player1hp - 10
			player1hpbarmeterw = (GetSpriteWidth(player1hpbarback) - 10) * player1hp / player1totalhp
			SetSpriteSize(player1hpbarmeter, player1hpbarmeterw, player1hpbarmeterh) 
		endif
	endif
	// Earth Ability 2 //
	if elementid2 = 3
		if earthability2spritex <= -GetSpriteWidth(earthability2sprite)
			earthabilitystatus2 = 0
			SetSpriteColorAlpha(earthability2sprite, 0)
		endif
	endif
	// Air Ability 2 //
	if elementid2 = 4
		if airability2spritex <= -GetSpriteWidth(airability2sprite)
			airabilitystatus2 = 0
			SetSpriteColorAlpha(airability2sprite, 0)
		endif
	endif
	
// Bottom Wall //
	if ballspritey >= GetVirtualHeight() - GetSpriteHeight(ballsprite) - ballspritespeedy
		ballspritediry = -1
	endif
	
// Top Wall //
	if ballspritey <= 0
		ballspritediry = 1
	endif
	
return

spritecollision:
// Player 1 Sprite and Ball //
	if GetSpriteCollision(player1sprite, ballsprite) = 1
		ballspritedirx = 1
		spritecollidestatus = 1	
	endif
	
// Player 2 Sprite and Ball //
	if GetSpriteCollision(player2sprite, ballsprite) = 1
		ballspritedirx = -1
		spritecollidestatus = 1
	endif
// Player 1 Sprite collides with Player 2 Sprite //
	// fireability1sprite and player2 collide //
	if elementid1 = 1
		if GetSpriteCollision(fireability1sprite, player2sprite) = 1
			if GetSpriteColorAlpha(fireability1sprite) = 255
				if fireabilitystatus1 = 1
					SetSpriteColorAlpha(fireability1sprite, 0)
					fireabilitystatus1 = 0
					// If hit the cooldown is reduced to 3 seconds //
					player1totalcooldown = player1totalcooldown - 7
					player1totalcooldownwidth = 3
					// Set the Health of Player 2 //
					player2hp = player2hp - 50
					player2hpbarmeterw = (GetSpriteWidth(player2hpbarback) - 10) * player2hp / player2totalhp
					SetSpriteSize(player2hpbarmeter, player2hpbarmeterw, player2hpbarmeterh) 
					player2hpbarmeterx = player2hpbarbackx + GetSpriteWidth(player2hpbarback) - GetSpriteWidth(player2hpbarmeter) - 5
					player2hpbarmetery = player2hpbarbacky + GetSpriteHeight(player2hpbarback)/2 - GetSpriteHeight(player2hpbarmeter)/2
					SetSpritePosition(player2hpbarmeter, player2hpbarmeterx, player2hpbarmetery)
					// If hit player 2 is stunned //
					stundurationplayer2 = Timer() 
				endif
			endif
		endif
	endif
	// earthability1sprite and player2collide //
	if elementid1 = 3
		if GetSpriteCollision(earthability1sprite, player2sprite) = 1
			if GetSpriteColorAlpha(earthability1sprite) = 255
				if earthabilitystatus1 = 1
					earthabilitystatus1 = 0
					SetSpriteColorAlpha(earthability1sprite, 0)
					// If hit player 2 is stunned //
					stundurationplayer2 = Timer()					
				endif
			endif
		endif
	endif
	// earthability1sprite and pong ball collide //
	if elementid1 = 3
		if GetSpriteCollision(earthability1sprite, ballsprite) = 1
			if ballspritedirx = -1 
				ballspritedirx = 1
			endif
		endif
	endif
	// airability1sprite and player2collide //
	if elementid1 = 4
		if GetSpriteCollision(airability1sprite, player2sprite) = 1
			if GetSpriteColorAlpha(airability1sprite) = 255
				airstunplayer2 = 1
			endif
		else
			airstunplayer2 = 0
		endif
	endif
	// airability1sprite and player2sprite //
		// air and fire //
	if elementid1 = 4 and elementid2 = 1
		if GetSpriteCollision(airability1sprite, fireability2sprite) = 1
			fireabilitystatus2 = 0
			SetSpriteColorAlpha(fireability2sprite, 0)
		endif
	endif
		// air and earth //
	if elementid1 = 4 and elementid2 = 3
		if GetSpriteCollision(airability1sprite, earthability2sprite) = 1
			earthabilitystatus2 = 0
			SetSpriteColorAlpha(earthability2sprite, 0)
		endif
	endif
		// air and air //
	if elementid1 = 4 and elementid2 = 4 
		if GetSpriteColorAlpha(airability2sprite) = 255 and GetSpriteColorAlpha(airability1sprite) = 255
			if GetSpriteCollision(airability1sprite, airability2sprite) = 1
				airabilitystatus1 = 0
				SetSpriteColorAlpha(airability1sprite, 0)
				airabilitystatus2 = 0
				SetSpriteColorAlpha(airability2sprite, 0)
			endif
		endif
	endif
	
// Player 2 Sprite collides with Player 1 Sprite //
	// fireability2sprite and player1 collide //
	if elementid2 = 1
		if GetSpriteCollision(fireability2sprite, player1sprite) = 1
			if GetSpriteColorAlpha(fireability2sprite) = 255
				if fireabilitystatus2 = 1
					SetSpriteColorAlpha(fireability2sprite, 0)
					fireabilitystatus2 = 0
					// If hit the cooldown is reduced to 3 seconds //
					player2totalcooldown = player2totalcooldown - 7
					player2totalcooldownwidth = 3
					// Set the Health of Player 1 //
					player1hp = player1hp - 50
					player1hpbarmeterw = (GetSpriteWidth(player1hpbarback) - 10) * player1hp / player1totalhp
					SetSpriteSize(player1hpbarmeter, player1hpbarmeterw, player1hpbarmeterh) 
					// If hit player 1 is stunned //
					stundurationplayer1 = Timer() 
				endif
			endif
		endif
	endif
	// earthability2sprite and player1collide //
	if elementid2 = 3
		if GetSpriteCollision(earthability2sprite, player1sprite) = 1
			if GetSpriteColorAlpha(earthability2sprite) = 255
				if earthabilitystatus2 = 1
					earthabilitystatus2 = 0
					SetSpriteColorAlpha(earthability2sprite, 0)
					// If hit player 1 is stunned //
					stundurationplayer1 = Timer()					
				endif
			endif
		endif
	endif
	// earthability2sprite and pong ball collide //
	if elementid2 = 3
		if GetSpriteCollision(earthability2sprite, ballsprite) = 1
			if ballspritedirx = 1 
				ballspritedirx = -1
			endif
		endif
	endif
	// airability2sprite and player1collide //
	if elementid2 = 4
		if GetSpriteCollision(airability2sprite, player1sprite) = 1
			if GetSpriteColorAlpha(airability2sprite) = 255
				airstunplayer1 = 1
			endif
		else
			airstunplayer1 = 0
		endif
	endif
	// airability2sprite and player1sprite //
		// air and fire //
	if elementid2 = 4 and elementid1 = 1
		if GetSpriteCollision(airability2sprite, fireability1sprite) = 1
			fireabilitystatus1 = 0
			SetSpriteColorAlpha(fireability1sprite, 0)
		endif
	endif
		// air and earth //
	if elementid2 = 4 and elementid1 = 3
		if GetSpriteCollision(airability2sprite, earthability1sprite) = 1
			earthabilitystatus1 = 0
			SetSpriteColorAlpha(earthability1sprite, 0)
		endif
	endif
		// air and air //
	if elementid2 = 4 and elementid1 = 4
		if GetSpriteColorAlpha(airability1sprite) = 255 and GetSpriteColorAlpha(airability2sprite) = 255
			if GetSpriteCollision(airability2sprite, airability1sprite) = 1
				airabilitystatus1 = 0
				SetSpriteColorAlpha(airability1sprite, 0)
				airabilitystatus2 = 0
				SetSpriteColorAlpha(airability2sprite, 0)
			endif
		endif
	endif	
return


player1cooldownbarcommands:
	if startcounting1 = 0 
		player1currentcooldownwidth = player1currentcooldown
		player1totalcooldownwidth = player1totalcooldown
	endif
	if startcounting1 = 1 
		player1currentcooldownwidth = player1currentcooldown - player1currentcooldownsave
		if player1currentcooldownwidth >= player1totalcooldownwidth
				player1currentcooldownwidth = player1totalcooldownwidth
		endif
	endif
	player1cooldownmeterw = (GetSpriteWidth(player1cooldownback) - 10)*player1currentcooldownwidth/player1totalcooldownwidth
	SetSpriteSize(player1cooldownmeter, player1cooldownmeterw, player1cooldownmeterh)
	player1cooldownmeterx = player1cooldownbackx + 5
	player1cooldownmetery = player1cooldownbacky + GetSpriteHeight(player1cooldownback)/2 - GetSpriteHeight(player1cooldownmeter)/2
	SetSpritePosition(player1cooldownmeter, player1cooldownmeterx, player1cooldownmetery)
return

player2cooldownbarcommands:
	if startcounting2 = 0 
		player2currentcooldownwidth = player2currentcooldown
		player2totalcooldownwidth = player2totalcooldown
	endif
	if startcounting2 = 1 
		player2currentcooldownwidth = player2currentcooldown - player2currentcooldownsave
		if player2currentcooldownwidth >= player2totalcooldownwidth
				player2currentcooldownwidth = player2totalcooldownwidth
		endif
	endif
	player2cooldownmeterw = (GetSpriteWidth(player2cooldownback) - 10)*player2currentcooldownwidth/player2totalcooldownwidth
	SetSpriteSize(player2cooldownmeter, player2cooldownmeterw, player2cooldownmeterh)
	player2cooldownmeterx = player2cooldownbackx + GetSpriteWidth(player2cooldownback) - GetSpriteWidth(player2cooldownmeter) - 5
	player2cooldownmetery = player2cooldownbacky + GetSpriteHeight(player2cooldownback)/2 - GetSpriteHeight(player2cooldownmeter)/2
	SetSpritePosition(player2cooldownmeter, player2cooldownmeterx, player2cooldownmetery)
return
